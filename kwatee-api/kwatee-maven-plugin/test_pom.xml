<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>net.kwatee.agiledeployment.example</groupId>
	<artifactId>maven</artifactId>
	<version>1.0.0</version>
	<properties>
		<kwateeurl>http://admin:password@localhost:8082/kwatee</kwateeurl>
	</properties>

	<profiles>
		<profile>
			<id>setup</id>
			<build>
				<plugins>
					<plugin>
						<groupId>net.kwatee.agiledeployment</groupId>
						<artifactId>kwatee-maven-plugin</artifactId>
						<version>${kwatee_api_version}</version>
						<executions>
							<execution>
								<id>createVersion</id>
								<goals>
									<goal>create_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<artifact>demowebsite</artifact>
									<version>maven2.0</version>
								</configuration>
							</execution>
							<execution>
								<id>updateArchive</id>
								<goals>
									<goal>update_package</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<artifact>demowebsite</artifact>
									<version>maven2.0</version>
									<file>./test_pom.xml</file>
								</configuration>
							</execution>
							<execution>
								<id>duplicateVersion</id>
								<goals>
									<goal>create_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<artifact>demowebsite</artifact>
									<version>maven2.1</version>
									<duplicateFrom>1.0</duplicateFrom>
								</configuration>
							</execution>
							<execution>
								<id>setActiveVersion</id>
								<goals>
									<goal>set_active_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<environment>intro</environment>
									<artifact>demowebsite</artifact>
									<version>maven2.0</version>
								</configuration>
							</execution>
							<execution>
								<id>tagRelease</id>
								<goals>
									<goal>tag_release</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<environment>intro</environment>
									<release>maven</release>
									<description>tagged with maven</description>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>deploy</id>
			<build>
				<plugins>
					<plugin>
						<groupId>net.kwatee.agiledeployment</groupId>
						<artifactId>kwatee-maven-plugin</artifactId>
						<version>${kwatee_api_version}</version>
						<executions>
							<execution>
								<id>deployEnvironment</id>
								<goals>
									<goal>deploy</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<environment>intro</environment>
									<actions>
										<param>undeploy</param>
										<param>deploy</param>
										<param>start</param>
										<param>stop</param>
									</actions>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>cleanup</id>
			<build>
				<plugins>
					<plugin>
						<groupId>net.kwatee.agiledeployment</groupId>
						<artifactId>kwatee-maven-plugin</artifactId>
						<version>${kwatee_api_version}</version>
						<executions>
							<execution>
								<id>deleteRelease</id>
								<goals>
									<goal>delete_release</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<environment>intro</environment>
									<release>maven</release>
								</configuration>
							</execution>
							<execution>
								<id>setActiveVersion</id>
								<goals>
									<goal>set_active_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<environment>intro</environment>
									<artifact>demowebsite</artifact>
									<version>1.0</version>
								</configuration>
							</execution>
							<execution>
								<id>deleteVersion20</id>
								<goals>
									<goal>delete_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<artifact>demowebsite</artifact>
									<version>maven2.0</version>
								</configuration>
							</execution>
							<execution>
								<id>deleteVersion21</id>
								<goals>
									<goal>delete_version</goal>
								</goals>
								<phase>package</phase>
								<configuration>
									<serviceUrl>${kwateeurl}</serviceUrl>
									<artifact>demowebsite</artifact>
									<version>maven2.1</version>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
</project>
